<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hosting and Streaming</title>
        <script src="aws-sdk.min.js">
        </script>
        <script src="aws-config.js">
        </script>
        <script>
            //------------------------------------------------------------------------------------
            // This function gets temporary credentials from the Amazon Cognito service using
            // the AWS JavaScript SDK. These credentials can be used to call other AWS resources.
            //------------------------------------------------------------------------------------
            function loadIdentity() {

                document.getElementById("projectName").innerHTML = aws_project_name;
                document.getElementById("projectRegion").innerHTML = aws_project_region;

                console.log("Getting AWS credentials...");
                var credentials = AWS.config.credentials;

                credentials.get(function(err) {

                    if (err) {
                        console.log("Error: " + err);
                        document.getElementById("identityId").innerHTML = err.message;
                        return;
                    }

                    console.log("Amazon Cognito Identity ID: " + credentials.identityId);
                    document.getElementById("identityId").innerHTML =  credentials.identityId;
                });
            }
        </script>
    </head>
    <!--
     Copyright 2017 Amazon.com, Inc. or its affiliates (Amazon). All Rights Reserved.

     Code generated by AWS Mobile Hub. Amazon gives unlimited permission to
     copy, distribute and modify it.
    -->
    <body onload="loadIdentity()">
        <h1>AWS Mobile Hub Sample Web App</h1>

        <p><b id="projectName"></b> project is being hosted in the <b id="projectRegion"></b> region.</p>

        <h3>The temporary AWS ID of the current user is:</h3>

        <ul>
            <p id="identityId"></p>
        </ul>

        <h4>On this page</h4>

        <ul>
            <li><a href="#javascript">JavaScript for AWS Web Apps</a></li>
            <li><a href="#Managing_Your_Web">Managing Your Web App Assets</a></li>
        </ul>

        <p>This page is delivered by a sample web app created with the <a href="https://console.aws.amazon.com/mobilehub/home" rel="noreferrer noopener" target="_blank">AWS Mobile Hub</a> Hosting and Streaming feature.</p>

        <p>Hosting and Streaming uses the <a href="https://aws.amazon.com/s3/" rel="noreferrer noopener" target="_blank">Amazon Simple Storage Service</a> (Amazon S3) ability to statically host web content. Your website is distributed through a global CDN using <a href="https://aws.amazon.com/cloudfront/" rel="noreferrer noopener" target="_blank">Amazon Cloudfront</a>.</p>

        <p>The configuration files generated for this Mobile Hub project can support JavaScript calls to AWS services from a hybrid web/native app. The project can also produce iOS and Android apps that uses the same assets as this web app. Learn more about the <a href="http://docs.aws.amazon.com/mobile-hub/latest/developerguide/hosting-and-streaming.html" rel="noreferrer noopener" target="_blank">Hosting and Streaming feature</a>.</p>

        <img src="index-diagram.png" style="max-width: 100%; width:600px"/>

        <h4 id="javascript">JavaScript for AWS Web Apps</h4>

        <p>The <a href="http://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/welcome.html" rel="noreferrer noopener" target="_blank">AWS SDK for JavaScript</a> allows your web app to use a range of powerful AWS services including, database, serverless logic, push notification and more.</p>

        <p>Upon page load, the sample web app used this SDK to establish a temporary unauthenticated AWS identity for the user by calling the Amazon Cognito service. Constants for the AWS services you configured in your Mobile Hub project are stored for use by your web app in the <a href="aws-config.js" rel="noreferrer noopener" target="_blank">aws-config.js</a> file in the root folder of this web app, and also <a href="aws-exports.js" rel="noreferrer noopener" target="_blank">aws-exports.js</a> is generated to support the integration of your AWS Services using JavaScript ES6 export syntax.</p>

        <h4 id="Managing_Your_Web">Managing Your Web App Assets</h4>

        <p>You can review, upload, move or delete the files stored in your bucket using the <a href="https://console.aws.amazon.com/s3/home" rel="noreferrer noopener" target="_blank">Amazon S3 console</a>, through the <a href="http://docs.aws.amazon.com/cli/latest/userguide/cli-s3.html" rel="noreferrer noopener" target="_blank">AWS Command Line Interface</a> (AWS CLI), or through a variety of third party tools.</p>

        <p>Find more information at <a href="http://docs.aws.amazon.com/mobile-hub/latest/developerguide/hosting-and-streaming.html" rel="noreferrer noopener" target="_blank">Hosting and Streaming</a> in the AWS Mobile Hub Developer Guide.</p>
    </body>
</html>
